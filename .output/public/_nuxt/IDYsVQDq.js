import{j as De,c as C,n as de,o as z,a as D,_ as Ee,l as ce,r as U,m as fe,k as He,H as We,p as S,I as Se,A as xe,b as _e,s as Ue,t as te,F as R,v as X,x as ae,J as Ve,K as Be,L as ke,M as Re,N as Fe,f as qe,O as Je,P as Ke,z as Ze,Q as ie,d as Ye}from"./Dr2qh0qR.js";function G(t){if(typeof t!="object")return t;var l,e,n=Object.prototype.toString.call(t);if(n==="[object Object]"){if(t.constructor!==Object&&typeof t.constructor=="function"){e=new t.constructor;for(l in t)t.hasOwnProperty(l)&&e[l]!==t[l]&&(e[l]=G(t[l]))}else{e={};for(l in t)l==="__proto__"?Object.defineProperty(e,l,{value:G(t[l]),configurable:!0,enumerable:!0,writable:!0}):e[l]=G(t[l])}return e}if(n==="[object Array]"){for(l=t.length,e=Array(l);l--;)e[l]=G(t[l]);return e}return n==="[object Set]"?(e=new Set,t.forEach(function(c){e.add(G(c))}),e):n==="[object Map]"?(e=new Map,t.forEach(function(c,f){e.set(G(f),G(c))}),e):n==="[object Date]"?new Date(+t):n==="[object RegExp]"?(e=new RegExp(t.source,t.flags),e.lastIndex=t.lastIndex,e):n==="[object DataView]"?new t.constructor(G(t.buffer)):n==="[object ArrayBuffer]"?t.slice(0):n.slice(-6)==="Array]"?new t.constructor(t):t}function Oe(t){return typeof t=="string"?`'${t}'`:new Qe().serialize(t)}const Qe=function(){class t{#e=new Map;compare(e,n){const c=typeof e,f=typeof n;return c==="string"&&f==="string"?e.localeCompare(n):c==="number"&&f==="number"?e-n:String.prototype.localeCompare.call(this.serialize(e,!0),this.serialize(n,!0))}serialize(e,n){if(e===null)return"null";switch(typeof e){case"string":return n?e:`'${e}'`;case"bigint":return`${e}n`;case"object":return this.$object(e);case"function":return this.$function(e)}return String(e)}serializeObject(e){const n=Object.prototype.toString.call(e);if(n!=="[object Object]")return this.serializeBuiltInType(n.length<10?`unknown:${n}`:n.slice(8,-1),e);const c=e.constructor,f=c===Object||c===void 0?"":c.name;if(f!==""&&globalThis[f]===c)return this.serializeBuiltInType(f,e);if(typeof e.toJSON=="function"){const i=e.toJSON();return f+(i!==null&&typeof i=="object"?this.$object(i):`(${this.serialize(i)})`)}return this.serializeObjectEntries(f,Object.entries(e))}serializeBuiltInType(e,n){const c=this["$"+e];if(c)return c.call(this,n);if(typeof n?.entries=="function")return this.serializeObjectEntries(e,n.entries());throw new Error(`Cannot serialize ${e}`)}serializeObjectEntries(e,n){const c=Array.from(n).sort((i,p)=>this.compare(i[0],p[0]));let f=`${e}{`;for(let i=0;i<c.length;i++){const[p,h]=c[i];f+=`${this.serialize(p,!0)}:${this.serialize(h)}`,i<c.length-1&&(f+=",")}return f+"}"}$object(e){let n=this.#e.get(e);return n===void 0&&(this.#e.set(e,`#${this.#e.size}`),n=this.serializeObject(e),this.#e.set(e,n)),n}$function(e){const n=Function.prototype.toString.call(e);return n.slice(-15)==="[native code] }"?`${e.name||""}()[native]`:`${e.name}(${e.length})${n.replace(/\s*\n\s*/g,"")}`}$Array(e){let n="[";for(let c=0;c<e.length;c++)n+=this.serialize(e[c]),c<e.length-1&&(n+=",");return n+"]"}$Date(e){try{return`Date(${e.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(e){return`ArrayBuffer[${new Uint8Array(e).join(",")}]`}$Set(e){return`Set${this.$Array(Array.from(e).sort((n,c)=>this.compare(n,c)))}`}$Map(e){return this.serializeObjectEntries("Map",e.entries())}}for(const l of["Error","RegExp","URL"])t.prototype["$"+l]=function(e){return`${l}(${e})`};for(const l of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])t.prototype["$"+l]=function(e){return`${l}[${e.join(",")}]`};for(const l of["BigInt64Array","BigUint64Array"])t.prototype["$"+l]=function(e){return`${l}[${e.join("n,")}${e.length>0?"n":""}]`};return t}();function Xe(t,l){return t===l||Oe(t)===Oe(l)}const Ge={key:0,class:"spinner-overlay"},et=De({__name:"LoadingSpinner",props:{isLoading:{type:Boolean}},setup(t){return(l,e)=>l.isLoading?(z(),C("div",Ge,e[0]||(e[0]=[D("div",{class:"pulse-loader"},[D("span"),D("span"),D("span")],-1)]))):de("",!0)}}),tt=Object.assign(Ee(et,[["__scopeId","data-v-0696d524"]]),{__name:"LoadingSpinner"});function Ne(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ge={exports:{}},nt=ge.exports,Ce;function Pe(){return Ce||(Ce=1,function(t,l){(function(e,n){t.exports=n()})(nt,function(){var e=1e3,n=6e4,c=36e5,f="millisecond",i="second",p="minute",h="hour",v="day",O="week",m="month",k="quarter",B="year",T="date",E="Invalid Date",J=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,se=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ee={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(y){var r=["th","st","nd","rd"],a=y%100;return"["+y+(r[(a-20)%10]||r[a]||r[0])+"]"}},H=function(y,r,a){var u=String(y);return!u||u.length>=r?y:""+Array(r+1-u.length).join(a)+y},Q={s:H,z:function(y){var r=-y.utcOffset(),a=Math.abs(r),u=Math.floor(a/60),s=a%60;return(r<=0?"+":"-")+H(u,2,"0")+":"+H(s,2,"0")},m:function y(r,a){if(r.date()<a.date())return-y(a,r);var u=12*(a.year()-r.year())+(a.month()-r.month()),s=r.clone().add(u,m),$=a-s<0,_=r.clone().add(u+($?-1:1),m);return+(-(u+(a-s)/($?s-_:_-s))||0)},a:function(y){return y<0?Math.ceil(y)||0:Math.floor(y)},p:function(y){return{M:m,y:B,w:O,d:v,D:T,h,m:p,s:i,ms:f,Q:k}[y]||String(y||"").toLowerCase().replace(/s$/,"")},u:function(y){return y===void 0}},F="en",j={};j[F]=ee;var ne="$isDayjsObject",re=function(y){return y instanceof le||!(!y||!y[ne])},V=function y(r,a,u){var s;if(!r)return F;if(typeof r=="string"){var $=r.toLowerCase();j[$]&&(s=$),a&&(j[$]=a,s=$);var _=r.split("-");if(!s&&_.length>1)return y(_[0])}else{var Y=r.name;j[Y]=r,s=Y}return!u&&s&&(F=s),s||!u&&F},A=function(y,r){if(re(y))return y.clone();var a=typeof r=="object"?r:{};return a.date=y,a.args=arguments,new le(a)},M=Q;M.l=V,M.i=re,M.w=function(y,r){return A(y,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var le=function(){function y(a){this.$L=V(a.locale,null,!0),this.parse(a),this.$x=this.$x||a.x||{},this[ne]=!0}var r=y.prototype;return r.parse=function(a){this.$d=function(u){var s=u.date,$=u.utc;if(s===null)return new Date(NaN);if(M.u(s))return new Date;if(s instanceof Date)return new Date(s);if(typeof s=="string"&&!/Z$/i.test(s)){var _=s.match(J);if(_){var Y=_[2]-1||0,x=(_[7]||"0").substring(0,3);return $?new Date(Date.UTC(_[1],Y,_[3]||1,_[4]||0,_[5]||0,_[6]||0,x)):new Date(_[1],Y,_[3]||1,_[4]||0,_[5]||0,_[6]||0,x)}}return new Date(s)}(a),this.init()},r.init=function(){var a=this.$d;this.$y=a.getFullYear(),this.$M=a.getMonth(),this.$D=a.getDate(),this.$W=a.getDay(),this.$H=a.getHours(),this.$m=a.getMinutes(),this.$s=a.getSeconds(),this.$ms=a.getMilliseconds()},r.$utils=function(){return M},r.isValid=function(){return this.$d.toString()!==E},r.isSame=function(a,u){var s=A(a);return this.startOf(u)<=s&&s<=this.endOf(u)},r.isAfter=function(a,u){return A(a)<this.startOf(u)},r.isBefore=function(a,u){return this.endOf(u)<A(a)},r.$g=function(a,u,s){return M.u(a)?this[u]:this.set(s,a)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(a,u){var s=this,$=!!M.u(u)||u,_=M.p(a),Y=function(b,g){var I=M.w(s.$u?Date.UTC(s.$y,g,b):new Date(s.$y,g,b),s);return $?I:I.endOf(v)},x=function(b,g){return M.w(s.toDate()[b].apply(s.toDate("s"),($?[0,0,0,0]:[23,59,59,999]).slice(g)),s)},L=this.$W,N=this.$M,q=this.$D,oe="set"+(this.$u?"UTC":"");switch(_){case B:return $?Y(1,0):Y(31,11);case m:return $?Y(1,N):Y(0,N+1);case O:var o=this.$locale().weekStart||0,d=(L<o?L+7:L)-o;return Y($?q-d:q+(6-d),N);case v:case T:return x(oe+"Hours",0);case h:return x(oe+"Minutes",1);case p:return x(oe+"Seconds",2);case i:return x(oe+"Milliseconds",3);default:return this.clone()}},r.endOf=function(a){return this.startOf(a,!1)},r.$set=function(a,u){var s,$=M.p(a),_="set"+(this.$u?"UTC":""),Y=(s={},s[v]=_+"Date",s[T]=_+"Date",s[m]=_+"Month",s[B]=_+"FullYear",s[h]=_+"Hours",s[p]=_+"Minutes",s[i]=_+"Seconds",s[f]=_+"Milliseconds",s)[$],x=$===v?this.$D+(u-this.$W):u;if($===m||$===B){var L=this.clone().set(T,1);L.$d[Y](x),L.init(),this.$d=L.set(T,Math.min(this.$D,L.daysInMonth())).$d}else Y&&this.$d[Y](x);return this.init(),this},r.set=function(a,u){return this.clone().$set(a,u)},r.get=function(a){return this[M.p(a)]()},r.add=function(a,u){var s,$=this;a=Number(a);var _=M.p(u),Y=function(N){var q=A($);return M.w(q.date(q.date()+Math.round(N*a)),$)};if(_===m)return this.set(m,this.$M+a);if(_===B)return this.set(B,this.$y+a);if(_===v)return Y(1);if(_===O)return Y(7);var x=(s={},s[p]=n,s[h]=c,s[i]=e,s)[_]||1,L=this.$d.getTime()+a*x;return M.w(L,this)},r.subtract=function(a,u){return this.add(-1*a,u)},r.format=function(a){var u=this,s=this.$locale();if(!this.isValid())return s.invalidDate||E;var $=a||"YYYY-MM-DDTHH:mm:ssZ",_=M.z(this),Y=this.$H,x=this.$m,L=this.$M,N=s.weekdays,q=s.months,oe=s.meridiem,o=function(g,I,w,P){return g&&(g[I]||g(u,$))||w[I].slice(0,P)},d=function(g){return M.s(Y%12||12,g,"0")},b=oe||function(g,I,w){var P=g<12?"AM":"PM";return w?P.toLowerCase():P};return $.replace(se,function(g,I){return I||function(w){switch(w){case"YY":return String(u.$y).slice(-2);case"YYYY":return M.s(u.$y,4,"0");case"M":return L+1;case"MM":return M.s(L+1,2,"0");case"MMM":return o(s.monthsShort,L,q,3);case"MMMM":return o(q,L);case"D":return u.$D;case"DD":return M.s(u.$D,2,"0");case"d":return String(u.$W);case"dd":return o(s.weekdaysMin,u.$W,N,2);case"ddd":return o(s.weekdaysShort,u.$W,N,3);case"dddd":return N[u.$W];case"H":return String(Y);case"HH":return M.s(Y,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return b(Y,x,!0);case"A":return b(Y,x,!1);case"m":return String(x);case"mm":return M.s(x,2,"0");case"s":return String(u.$s);case"ss":return M.s(u.$s,2,"0");case"SSS":return M.s(u.$ms,3,"0");case"Z":return _}return null}(g)||_.replace(":","")})},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(a,u,s){var $,_=this,Y=M.p(u),x=A(a),L=(x.utcOffset()-this.utcOffset())*n,N=this-x,q=function(){return M.m(_,x)};switch(Y){case B:$=q()/12;break;case m:$=q();break;case k:$=q()/3;break;case O:$=(N-L)/6048e5;break;case v:$=(N-L)/864e5;break;case h:$=N/c;break;case p:$=N/n;break;case i:$=N/e;break;default:$=N}return s?$:M.a($)},r.daysInMonth=function(){return this.endOf(m).$D},r.$locale=function(){return j[this.$L]},r.locale=function(a,u){if(!a)return this.$L;var s=this.clone(),$=V(a,u,!0);return $&&(s.$L=$),s},r.clone=function(){return M.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},y}(),he=le.prototype;return A.prototype=he,[["$ms",f],["$s",i],["$m",p],["$H",h],["$W",v],["$M",m],["$y",B],["$D",T]].forEach(function(y){he[y[1]]=function(r){return this.$g(r,y[0],y[1])}}),A.extend=function(y,r){return y.$i||(y(r,le,A),y.$i=!0),A},A.locale=V,A.isDayjs=re,A.unix=function(y){return A(1e3*y)},A.en=j[F],A.Ls=j,A.p={},A})}(ge)),ge.exports}var rt=Pe();const W=Ne(rt);var we={exports:{}},it=we.exports,ze;function at(){return ze||(ze=1,function(t,l){(function(e,n){t.exports=n(Pe())})(it,function(e){function n(k){return k&&typeof k=="object"&&"default"in k?k:{default:k}}var c=n(e);function f(k){return k%10<5&&k%10>1&&~~(k/10)%10!=1}function i(k,B,T){var E=k+" ";switch(T){case"m":return B?"minuta":"minutę";case"mm":return E+(f(k)?"minuty":"minut");case"h":return B?"godzina":"godzinę";case"hh":return E+(f(k)?"godziny":"godzin");case"MM":return E+(f(k)?"miesiące":"miesięcy");case"yy":return E+(f(k)?"lata":"lat")}}var p="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia".split("_"),h="styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień".split("_"),v=/D MMMM/,O=function(k,B){return v.test(B)?p[k.month()]:h[k.month()]};O.s=h,O.f=p;var m={name:"pl",weekdays:"niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_śr_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_Śr_Cz_Pt_So".split("_"),months:O,monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru".split("_"),ordinal:function(k){return k+"."},weekStart:1,yearStart:4,relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:i,mm:i,h:i,hh:i,d:"1 dzień",dd:"%d dni",M:"miesiąc",MM:i,y:"rok",yy:i},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"}};return c.default.locale(m,null,!0),m})}(we)),we.exports}at();const st=["onKeydown","aria-expanded"],ot={key:0,class:"value text-black-own"},lt={key:0,class:"calendar-popover cursor-default",role:"dialog","aria-modal":"false","aria-label":"Wybór daty"},ut={class:"calendar-header"},ct={class:"month-label"},dt={class:"weekday-row"},ft={class:"days-grid",role:"grid"},ht=["onClick","aria-pressed"],pt=De({__name:"calendar",props:{modelValue:{},format:{},disabledDates:{}},emits:["update:modelValue"],setup(t,{emit:l}){W.locale("pl");const e=t,n=l,c=e.format??"DD.MM.YYYY",f=ce(()=>new Set(e.disabledDates??["2025-01-01","2025-05-01","2025-05-03","2025-12-25","2025-12-26"])),i=U(!1),p=U(null),h=U(e.modelValue?W(e.modelValue):null),v=U(h.value?h.value.startOf("month"):W().startOf("month")),O=["Pn","Wt","Śr","Cz","Pt","Sb","Nd"];fe(()=>e.modelValue,H=>{h.value=H?W(H):null,h.value&&(v.value=h.value.startOf("month"))});function m(){i.value=!i.value}function k(H){p.value&&H.target instanceof Node&&(p.value.contains(H.target)||(i.value=!1))}He(()=>document.addEventListener("click",k)),We(()=>document.removeEventListener("click",k));function B(){v.value=v.value.subtract(1,"month")}function T(){v.value=v.value.add(1,"month")}const E=ce(()=>{const H=v.value.startOf("month"),F=(H.day()+6)%7,j=H.subtract(F,"day"),ne=[];for(let re=0;re<42;re++){const V=j.add(re,"day"),A=V.day()===0||V.day()===6,M=f.value.has(V.format("YYYY-MM-DD"));ne.push({key:V.format("YYYY-MM-DD"),date:V,inMonth:V.month()===v.value.month(),isToday:V.isSame(W(),"day"),isSelected:h.value?V.isSame(h.value,"day"):!1,isDisabled:A||M})}return ne});function J(H){const Q=E.value.find(F=>F.date.isSame(H,"day"));!Q||Q.isDisabled||(h.value=H.startOf("day"),n("update:modelValue",h.value.format("YYYY-MM-DD")),i.value=!1)}function se(){const H=W().startOf("day");E.value.find(Q=>Q.date.isSame(H,"day")&&Q.isDisabled)||(v.value=H.startOf("month"),J(H))}const ee=ce(()=>h.value?h.value.format(c):"");return(H,Q)=>{const F=Ue;return z(),C("div",{class:"calendar-input",ref_key:"root",ref:p},[D("div",{class:"calendar-trigger",role:"button",tabindex:"0",onClick:m,onKeydown:[Se(xe(m,["prevent"]),["enter"]),Se(xe(m,["prevent"]),["space"])],"aria-expanded":S(i).toString(),"aria-haspopup":"dialog"},[_e(F,{name:"ph:calendar-blank-bold",size:"25",class:"primary-color"}),S(ee)?(z(),C("span",ot,te(S(ee)),1)):de("",!0)],40,st),S(i)?(z(),C("div",lt,[D("div",ut,[D("button",{class:"nav-btn",onClick:B,"aria-label":"Poprzedni miesiąc"},"‹"),D("div",ct,te(S(v).format("MMMM YYYY")),1),D("button",{class:"nav-btn",onClick:T,"aria-label":"Następny miesiąc"},"›")]),D("div",dt,[(z(),C(R,null,X(O,j=>D("div",{key:j,class:"weekday-cell"},te(j),1)),64))]),D("div",ft,[(z(!0),C(R,null,X(S(E),j=>(z(),C("button",{key:j.key,class:ae(["day-cell",{"other-month":!j.inMonth,today:j.isToday,selected:j.isSelected,disabled:j.isDisabled}]),onClick:ne=>J(j.date),"aria-pressed":j.isSelected?"true":"false"},te(j.date.date()),11,ht))),128))]),D("div",{class:"calendar-footer"},[D("button",{class:"primary-button-ghost",onClick:se},"Dziś")])])):de("",!0)],512)}}}),mt=Object.assign(Ee(pt,[["__scopeId","data-v-be4849fa"]]),{__name:"InputCalendar"});var $e={exports:{}},vt=$e.exports,Ie;function yt(){return Ie||(Ie=1,function(t,l){(function(e,n){t.exports=n()})(vt,function(){return function(e,n,c){n.prototype.isBetween=function(f,i,p,h){var v=c(f),O=c(i),m=(h=h||"()")[0]==="(",k=h[1]===")";return(m?this.isAfter(v,p):!this.isBefore(v,p))&&(k?this.isBefore(O,p):!this.isAfter(O,p))||(m?this.isBefore(v,p):!this.isAfter(v,p))&&(k?this.isAfter(O,p):!this.isBefore(O,p))}}})}($e)),$e.exports}var _t=yt();const gt=Ne(_t);function wt(t,l){if(typeof t!="string")throw new TypeError("argument str must be a string");const e={},n=l||{},c=n.decode||$t;let f=0;for(;f<t.length;){const i=t.indexOf("=",f);if(i===-1)break;let p=t.indexOf(";",f);if(p===-1)p=t.length;else if(p<i){f=t.lastIndexOf(";",i-1)+1;continue}const h=t.slice(f,i).trim();if(n?.filter&&!n?.filter(h)){f=p+1;continue}if(e[h]===void 0){let v=t.slice(i+1,p).trim();v.codePointAt(0)===34&&(v=v.slice(1,-1)),e[h]=bt(v,c)}f=p+1}return e}function $t(t){return t.includes("%")?decodeURIComponent(t):t}function bt(t,l){try{return l(t)}catch{return t}}const pe=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function Te(t,l,e){const n=e||{},c=n.encode||encodeURIComponent;if(typeof c!="function")throw new TypeError("option encode is invalid");if(!pe.test(t))throw new TypeError("argument name is invalid");const f=c(l);if(f&&!pe.test(f))throw new TypeError("argument val is invalid");let i=t+"="+f;if(n.maxAge!==void 0&&n.maxAge!==null){const p=n.maxAge-0;if(Number.isNaN(p)||!Number.isFinite(p))throw new TypeError("option maxAge is invalid");i+="; Max-Age="+Math.floor(p)}if(n.domain){if(!pe.test(n.domain))throw new TypeError("option domain is invalid");i+="; Domain="+n.domain}if(n.path){if(!pe.test(n.path))throw new TypeError("option path is invalid");i+="; Path="+n.path}if(n.expires){if(!Mt(n.expires)||Number.isNaN(n.expires.valueOf()))throw new TypeError("option expires is invalid");i+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():n.priority){case"low":{i+="; Priority=Low";break}case"medium":{i+="; Priority=Medium";break}case"high":{i+="; Priority=High";break}default:throw new TypeError("option priority is invalid")}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:{i+="; SameSite=Strict";break}case"lax":{i+="; SameSite=Lax";break}case"strict":{i+="; SameSite=Strict";break}case"none":{i+="; SameSite=None";break}default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(i+="; Partitioned"),i}function Mt(t){return Object.prototype.toString.call(t)==="[object Date]"||t instanceof Date}const kt={path:"/",watch:!0,decode:t=>Ve(decodeURIComponent(t)),encode:t=>encodeURIComponent(typeof t=="string"?t:JSON.stringify(t))},me=window.cookieStore;function je(t,l){const e={...kt,...l};e.filter??=v=>v===t;const n=Ae(e)||{};let c;e.maxAge!==void 0?c=e.maxAge*1e3:e.expires&&(c=e.expires.getTime()-Date.now());const f=c!==void 0&&c<=0,i=f||n[t]===void 0||n[t]===null,p=G(f?void 0:n[t]??e.default?.()),h=c&&!f?xt(p,c,e.watch&&e.watch!=="shallow"):U(p);{let v=null;try{!me&&typeof BroadcastChannel<"u"&&(v=new BroadcastChannel(`nuxt:cookies:${t}`))}catch{}const O=(T=!1)=>{!T&&(e.readonly||Xe(h.value,n[t]))||(St(t,h.value,e),n[t]=G(h.value),v?.postMessage({value:e.encode(h.value)}))},m=T=>{const E=T.refresh?Ae(e)?.[t]:e.decode(T.value);k=!0,h.value=E,n[t]=G(E),Fe(()=>{k=!1})};let k=!1;const B=!!Be();if(B&&ke(()=>{k=!0,O(),v?.close()}),me){const T=E=>{const J=E.changed.find(ee=>ee.name===t),se=E.deleted.find(ee=>ee.name===t);J&&m({value:J.value}),se&&m({value:null})};me.addEventListener("change",T),B&&ke(()=>me.removeEventListener("change",T))}else v&&(v.onmessage=({data:T})=>m(T));e.watch&&fe(h,()=>{k||O()},{deep:e.watch!=="shallow"}),i&&O(i)}return h}function Ae(t={}){return wt(document.cookie,t)}function Dt(t,l,e={}){return l==null?Te(t,l,{...e,maxAge:-1}):Te(t,l,e)}function St(t,l,e={}){document.cookie=Dt(t,l,e)}const Le=2147483647;function xt(t,l,e){let n,c,f=0;const i=e?U(t):{value:t};return Be()&&ke(()=>{c?.(),clearTimeout(n)}),Re((p,h)=>{e&&(c=fe(i,h));function v(){f=0,clearTimeout(n);const O=l-f,m=O<Le?O:Le;n=setTimeout(()=>{if(f+=m,f<l)return v();i.value=void 0,h()},m)}return{get(){return p(),i.value},set(O){v(),i.value=O,h()}}})}const Yt=window.setInterval,Ot={key:0},Ct={class:"schedule-scroll"},zt={class:"header-row"},It={class:"subheader-row"},Tt={class:"doctor-text"},jt={class:"body"},At={class:"time-cell"},Lt=["title","onClick"],Et={class:"current-time-box"},ve=50,ue=7,Me=21,K=100,ye=75,Wt=De({__name:"api-week",setup(t){const{isModalOpen:l}=Je();W.locale("pl"),W.extend(gt);const e=qe().$axiosInstance,n=je("centerDay"),c=U(!0),f=je("currentWeekStart");fe(l,async o=>{o===!1&&(J.value=!1,await E())});const i=[{id:1,name:"Michał"},{id:2,name:"Grzegorz"},{id:3,name:"Ola"},{id:4,name:"Kacper"}],p=W(),h=p.format("YYYY-MM-DD"),v=U(p),O=Array.from({length:Me-ue},(o,d)=>`${String(d+ue).padStart(2,"0")}:00`),m=ce(()=>{const d=(v.value.day()+6)%7,b=v.value.subtract(d,"day").startOf("day");return Array.from({length:60}).map((I,w)=>{const P=b.add(w-30,"day");return{date:P.format("YYYY-MM-DD"),label:P.format("dddd (DD.MM)").replace(/^./,Z=>Z.toUpperCase())}}).filter(I=>{const w=W(I.date).day();return w!==0&&w!==6})}),k=ce(()=>{const o=m.value[0].date,d=m.value[m.value.length-1].date;return`${W(o).format("DD.MM.YYYY")} - ${W(d).format("DD.MM.YYYY")}`}),B=U([]),T=U([]);async function E(){const o=k.value,d=await e.get(`/schedule/all-visits?week=${encodeURIComponent(o)}`);B.value=d.data;const b=await e.get(`/vacations?week=${encodeURIComponent(o)}`);T.value=b.data}const J=U(!1),se=U();function ee(o){o.type==="visit"&&(se.value=o.id,J.value=!J.value)}const H=()=>{J.value=!1};function Q(){if(f.value){const b=W(f.value);if(b.isValid()){v.value=b;return}}const d=(p.day()+6)%7;v.value=p.subtract(d,"day").startOf("day")}function F(){f.value=v.value.format("YYYY-MM-DD")}const j=ce(()=>{const o=W(m.value[0].date).startOf("day"),d=W(m.value[m.value.length-1].date).endOf("day"),b=[];return B.value.forEach(g=>{const I=W(`${g.date} ${g.end_time}`);I.isBetween(o,d,"day","[]")&&b.push({id:g.visit_id,type:"visit",date:g.date,start_time:g.start_time,end_time:g.end_time,label:`${g.user_name.charAt(0)}. ${g.user_surname}`,doctor_id:g.doctor_id,isPast:I.isBefore(W())})}),T.value.forEach(g=>{const I=W(`${g.start_date} ${g.end_time}`);I.isBetween(o,d,"day","[]")&&b.push({id:g.id,type:"vacation",date:g.start_date,start_time:g.start_time,end_time:g.end_time,label:"",doctor_id:g.doctor_id,isPast:I.isBefore(W())})}),b});function ne(o){const[d,b,g]=o.split(":").map(Number);return d*60+b+(g>0?1:0)}function re(o){const d=m.value.findIndex(Z=>Z.date===o.date);if(d===-1)return{display:"none"};const b=i.findIndex(Z=>Z.id===o.doctor_id);if(b===-1)return{display:"none"};const g=ne(o.start_time)-ue*60,I=ne(o.end_time)-ue*60;if(g<0||I>(Me-ue)*60)return{display:"none"};const w=Math.round(g/60*ve),P=Math.round((I-g)/60*ve);return{position:"absolute",top:`${he()+y()+w}px`,left:`${(d*i.length+b)*K}px`,height:`${P}px`,width:`${K}px`,borderRadius:"4px",boxSizing:"border-box",overflow:"hidden",textAlign:"center",color:"white",cursor:"pointer"}}function V(o){return o.type==="visit"?o.label:(o.type==="vacation","")}const A=U(W().format("HH:mm")),M=U(-1);function le(){const o=W();if(A.value=o.format("HH:mm"),o.hour()<ue||o.hour()>Me){M.value=-1;return}const d=(o.hour()-ue)*60+o.minute();M.value=he()+y()+d/60*ve}function he(){return 30}function y(){return 30}const r=U(null);function a(o){if(!r.value)return;const d=o.target;d.closest(".time-cell")||d.closest(".time-col-test")||Math.abs(o.deltaY)>Math.abs(o.deltaX)&&(o.preventDefault(),r.value.scrollLeft+=o.deltaY)}let u=null;const s=U(null);function $(){if(!r.value)return;const o=r.value.scrollLeft+r.value.clientWidth/2,d=i.length*K,b=Math.floor((o-ye)/d);b>=0&&b<m.value.length?(s.value=m.value[b],n.value=s.value.date):s.value=null,!L.value&&s.value&&(x.value=s.value.date)}He(async()=>{c.value=!0,Q(),await E(),r.value=document.querySelector(".schedule-scroll");const o=n.value||h,d=m.value.findIndex(b=>b.date===o);if(r.value&&d>=0)setTimeout(()=>{_(d)},50);else if(r.value){const b=m.value.findIndex(g=>g.date===h);b>=0&&setTimeout(()=>{_(b)},50)}r.value?.addEventListener("wheel",a,{passive:!1}),r.value?.addEventListener("scroll",$),le(),u=Yt(le,100),setTimeout(()=>{c.value=!1},800)}),We(()=>{u&&clearInterval(u),r.value?.removeEventListener("wheel",a),r.value?.removeEventListener("scroll",$)});function _(o){if(!r.value)return;const d=i.length*K,g=ye+o*d+d/2,I=r.value.clientWidth/2,w=g-I;r.value.scrollTo({left:w,behavior:"smooth"})}function Y(){oe();const o=m.value.findIndex(d=>d.date===h);o>=0?_(o):(v.value=p.startOf("day"),F(),E().then(()=>{const d=m.value.findIndex(b=>b.date===h);d>=0&&setTimeout(()=>_(d),50)}))}const x=U(p.format("YYYY-MM-DD")),L=U(null),N=ce({get(){return x.value},set(o){x.value=o,q()}});function q(){const o=W(x.value);o.isValid()&&(v.value=o.startOf("day"),F(),E().then(()=>{const d=m.value.findIndex(b=>b.date===o.format("YYYY-MM-DD"));d>=0?setTimeout(()=>_(d),50):Y()}),L.value=x.value)}fe(s,o=>{!L.value&&o&&(x.value=o.date)});function oe(){L.value=null}return fe(s,o=>{o&&(x.value=o.date)}),(o,d)=>{const b=Ke,g=tt,I=mt;return z(),C(R,null,[_e(b,{component:"visit",modalActive:S(J),data:S(se),onClose:H},null,8,["modalActive","data"]),S(c)?(z(),C("div",Ot,[_e(g,{isLoading:!0})])):de("",!0),D("div",{class:ae(["flex place-items-center w-full justify-between px-[30px] pb-[24px] mt-[60px]",S(c)==!0?"window-loading":""])},[d[1]||(d[1]=D("h1",{class:"font-semibold text-[32px]"},"Kalendarz z wizytami",-1)),_e(I,{modelValue:S(N),"onUpdate:modelValue":d[0]||(d[0]=w=>Ze(N)?N.value=w:null)},null,8,["modelValue"])],2),D("div",{class:ae(S(c)==!0?"window-loading":"main-window")},[D("div",Ct,[D("div",{class:"schedule-inner",style:ie({minWidth:S(m).length*i.length*K+ye+"px"})},[D("div",zt,[d[2]||(d[2]=D("div",{class:"time-col-start"},null,-1)),(z(!0),C(R,null,X(S(m),(w,P)=>(z(),C("div",{key:w.date,class:ae(["day-col",{"alt-bg":P%2===1,"today-class":w.date===S(h)}]),style:ie({width:i.length*K+"px"})},[D("p",null,[Ye(te(w.label.split("(")[0])+" ",1),D("span",{class:ae(["text-gray-400",{"today-class":w.date===S(h)}])}," ("+te(w.label.split("(")[1]),3)])],6))),128))]),D("div",It,[d[3]||(d[3]=D("div",{class:"time-col-test"},null,-1)),(z(!0),C(R,null,X(S(m),(w,P)=>(z(),C(R,{key:w.date+"-doctors"},[(z(),C(R,null,X(i,Z=>D("div",{key:w.date+"-doctor-"+Z.id,class:ae(["doctor-col",{"alt-bg":P%2===1}]),style:ie({width:K+"px"})},[D("p",Tt,te(Z.name),1)],6)),64))],64))),128))]),D("div",jt,[(z(!0),C(R,null,X(S(O),w=>(z(),C("div",{key:w,class:"hour-row"},[D("div",At,te(w),1),(z(!0),C(R,null,X(S(m),(P,Z)=>(z(),C(R,{key:P.date+"-slots-"+w},[(z(),C(R,null,X(i,be=>D("div",{key:P.date+"-slot-"+be.id+"-"+w,class:ae(["slot-cell",{"alt-bg":Z%2===1}]),style:ie({width:K+"px"})},null,6)),64))],64))),128))]))),128))]),D("div",{class:"events-layer",style:ie({width:S(m).length*i.length*K+"px",left:ye+"px",height:S(O).length*ve+"px"})},[(z(!0),C(R,null,X(S(j),w=>(z(),C("div",{key:w.id+"-"+w.type,class:ae(["event",[w.type,w.isPast?"event-past":"event-future"]]),style:ie(re(w)),title:V(w),onClick:P=>ee(w)},te(V(w)),15,Lt))),128))],4),S(M)>=0?(z(),C("div",{key:0,class:"current-time-overlay",style:ie({top:S(M)+"px"})},[(z(!0),C(R,null,X(S(m),(w,P)=>(z(),C(R,{key:"line-"+w.date},[(z(),C(R,null,X(i,(Z,be)=>D("div",{key:"line-"+w.date+"-"+Z.id,class:ae(["current-time-line",{faded:w.date!==S(h)}]),style:ie({position:"absolute",left:(P*i.length+be)*K+"px",width:K+"px",height:"2px",top:"0px"})},null,6)),64))],64))),128))],4)):de("",!0),S(M)>=0?(z(),C("div",{key:1,class:"current-time-overlay",style:ie({top:S(M)+"px",left:S(m).findIndex(w=>w.date===S(h))*i.length*K+"px",width:K+"px",height:"20px",pointerEvents:"none",position:"absolute",zIndex:21})},[D("div",Et,te(S(A)),1)],4)):de("",!0),d[4]||(d[4]=Ye("z ",-1))],4)])],2)],64)}}});export{Wt as default};
