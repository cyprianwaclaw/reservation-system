import{j as F,r as u,k as ve,c as i,o as n,a as s,_ as R,f as xe,l as V,m as K,b as k,T as q,w as H,n as h,p as a,d as b,t as f,q as Q,s as _e,F as T,v as j,x as E,y as fe,z as J,A as ke,B as X,C as ye,D as we,E as he,G as ee}from"./Dr2qh0qR.js";const be={class:"flex justify-start items-start mb-[14px]"},ge={key:0,class:"w-[80px] h-[80px]"},ze={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",class:"w-[80px] h-[80px]"},De=F({__name:"successCheck",setup(W){const g=u(!1);return ve(()=>{setTimeout(()=>{g.value=!0},200)}),(B,v)=>(n(),i("div",be,[g.value?(n(),i("svg",ze,v[0]||(v[0]=[s("circle",{class:"checkmark-circle",cx:"32",cy:"32",r:"28",fill:"none"},null,-1),s("path",{class:"checkmark-check",fill:"none",d:"M18 34l9 9 20-20"},null,-1)]))):(n(),i("div",ge))]))}}),Ve=Object.assign(R(De,[["__scopeId","data-v-5cdb1ac9"]]),{__name:"SuccessCheck"}),Ce={class:"calendar w-[450px]"},Me={key:0,class:"confirmation mt-[60px]"},Te={class:"flex flex-col"},je={class:"mt-[8px] text-[17px]"},Be={class:"primary-color font-semibold underline"},Se={class:"bg-[#31a9ce29] mt-[32px] mb-[6px] p-[26px] rounded-xl"},$e={class:"flex flex-col gap-[2px]"},Ne={class:"text-[17px]"},Ie={class:"primary-color font-semibold underline text-[19px]"},Ue={class:"text-[17px]"},Ae={class:"primary-color font-semibold underline text-[19px]"},Ee={class:"text-[17px]"},Fe={class:"primary-color font-semibold underline text-[19px]"},Re={key:0},We={class:"w-[370px] border-calendar mt-[44px] p-[25px]"},Le={class:"calendar-header"},Pe={key:1,class:"w-[40px]"},Ye={class:"month-label text-center w-full"},Ge={key:3,class:"w-[40px]"},Oe={class:"weekday-row mt-[21px]"},Ze={class:"days-grid"},Ke=["onClick","aria-pressed"],qe={key:0,class:"pb-[160px]"},He={key:0,class:"person-picker mt-[50px]"},Qe={class:"persons-grid"},Je=["onClick"],Xe={key:1,class:"time-picker"},et={class:"time-grid"},tt=["onClick"],st={key:0,class:"no-times"},at={key:2,class:"booking-form"},lt={key:3,class:"booking-form"},nt={class:"w-full flex flex-col gap-[10px]"},ot={class:"w-full flex flex-row gap-[10px]"},it={class:"w-full flex flex-row gap-[10px]"},rt={class:"w-full flex flex-row gap-[14px] place-items-center my-[12px]"},ut={class:"w-[100px]"},dt={class:"mt-[21px]"},ct={class:"checkbox-wrapper"},pt=1,mt=F({__name:"newReserve",setup(W){const g=xe().$axiosInstance,{setErrors:B}=ee();u(!1);function v(l){const e=l.getFullYear(),c=(l.getMonth()+1).toString().padStart(2,"0"),z=l.getDate().toString().padStart(2,"0");return`${e}-${c}-${z}`}const x=u(new Date().getFullYear()),p=u(new Date().getMonth()),S=new Date,te=v(S),$=S.getFullYear(),L=S.getMonth(),r=u(null),d=u(null),m=u(null),_=u(null),M=u([]),o=u({name:"",surname:"",phone:"",email:"",wiek:"",description:""}),C=u(!1),N=u(!0),I=u(!1),U=u(),se=u([{value:"Zabiegi",label:"Zabiegi"},{value:"Fizjoterapia",label:"Fizjoterapia"},{value:"Rehabilitacja",label:"Rehabilitacja"},{value:"Masaż",label:"Masaż"},{value:"Kinezyterapia",label:"Kinezyterapia"},{value:"Elektroterapia",label:"Elektroterapia"},{value:"Terapia manualna",label:"Terapia manualna"}]),ae=["Pn","Wt","Śr","Cz","Pt","Sb","Nd"],P=V(()=>{if(!r.value)return[];const l=M.value.find(e=>e.date===r.value);return l?l.doctors:[]});async function Y(){try{const l=new Date,e=new Date(l);e.setMonth(l.getMonth()+1);const c=e.getTime()-l.getTime(),z=Math.ceil(c/(1e3*60*60*24))+1,w=await g.get("/schedule/available-days",{params:{start_date:l.toISOString().split("T")[0],days_ahead:z}}),y=["07:30","18:45","19:30","20:15"];M.value=w.data.map(t=>({...t,doctors:t.doctors.map(D=>({...D,free_slots:D.free_slots.filter(me=>!y.includes(me))}))}))}catch(l){console.error("Błąd ładowania dostępnych dni:",l)}}function le(l,e){const c=[];let w=new Date(l,e,1).getDay();w=w===0?6:w-1;for(let t=0;t<w;t++)c.push({day:0,date:"",isBlank:!0});const y=new Date(l,e+1,0).getDate();for(let t=1;t<=y;t++){const D=new Date(l,e,t);c.push({day:t,date:v(D),isBlank:!1})}return c}const ne=V(()=>le(x.value,p.value)),oe=V(()=>new Date(x.value,p.value).toLocaleDateString("pl-PL",{year:"numeric",month:"long"}));function A(l){return M.value.some(e=>e.date===l)}function ie(l){A(l)&&(r.value=l,d.value=null,m.value=null,_.value=null)}function re(l){d.value=l,m.value=null,_.value=null}const G=V(()=>{if(!r.value||!d.value)return[];const l=M.value.find(c=>c.date===r.value);if(!l)return[];const e=l.doctors.find(c=>c.doctor_id===d.value);return e?e.free_slots:[]});function ue(l){m.value=l,_.value=null}async function de(){if(!(!r.value||!d.value||!m.value)&&!(!o.value.name||!o.value.surname||!o.value.phone||!o.value.email||!C.value))try{await g.post("/schedule/reserve",{doctor_id:d.value,name:o.value.name,surname:o.value.surname,phone:o.value.phone,email:o.value.email,wiek:o.value.wiek,date:r.value,start_time:m.value,duration:45}),await Y();const l=P.value.find(e=>e.doctor_id===d.value);_.value={date:r.value,doctor:l?`${l.name} ${l.surname}`:"",hour:m.value,name:o.value.name},r.value=null,d.value=null,m.value=null,C.value=!1,o.value={name:"",surname:"",phone:"",email:"",wiek:"",description:""}}catch(l){l.response?.data?.errors&&B(l.response.data.errors)}}const O=V(()=>x.value>$||x.value===$&&p.value>L),Z=V(()=>{const l=$*12+L+pt;return x.value*12+p.value<l});function ce(){O.value&&(p.value===0?(p.value=11,x.value-=1):p.value-=1)}function pe(){Z.value&&(p.value===11?(p.value=0,x.value+=1):p.value+=1)}return K([x,p],()=>{Y(),r.value=null,d.value=null,m.value=null,_.value=null},{immediate:!0}),K(_,async l=>{l?(N.value=!1,setTimeout(()=>{I.value=!0},310)):(I.value=!1,setTimeout(()=>{N.value=!0},310))}),(l,e)=>{const c=Ve,z=_e,w=fe,y=ye;return n(),i("div",Ce,[k(q,{name:"fade-slide"},{default:H(()=>[a(I)?(n(),i("div",Me,[k(c),e[16]||(e[16]=s("p",{class:"text-[28px] font-semibold"}," Zarezerwowano wizytę! ",-1)),s("div",Te,[s("p",je,[e[8]||(e[8]=b(" Dzień dobry ",-1)),s("span",Be,f(a(_)?.name),1),e[9]||(e[9]=b(", ",-1)),e[10]||(e[10]=s("br",null,null,-1)),e[11]||(e[11]=b(" dziękujemy za umówienie wizyty w naszym gabinecie. Dzień przed wizytą otrzymasz e-maila oraz SMS z przypomnieniem ",-1))]),s("div",Se,[e[15]||(e[15]=s("p",{class:"text-[21px] font-semibold mb-[8px]"},"Szczegóły wizyty",-1)),s("div",$e,[s("p",Ne,[e[12]||(e[12]=b(" Termin: ",-1)),s("span",Ie,f(a(_)?.date),1)]),s("p",Ue,[e[13]||(e[13]=b(" Godzina: ",-1)),s("span",Ae,f(a(_)?.hour),1)]),s("p",Ee,[e[14]||(e[14]=b(" Lekarz: ",-1)),s("span",Fe,f(a(_)?.doctor),1)])])])])])):h("",!0)]),_:1}),k(q,{name:"fade-slide"},{default:H(()=>[a(N)?(n(),i("div",Re,[e[25]||(e[25]=s("h2",{class:"text-[40px] font-bold mb-[4px]"},"Umów wizytę",-1)),e[26]||(e[26]=s("p",{class:"text-[18px] text-gray-600 mb-[24px]"},[b(" Wybierz dogodny dla siebie termin z kalendarza poniżej "),s("br"),b("i zarezerwuj wizytę online. To szybkie i wygodne, wystarczy kilka kliknięć ")],-1)),s("div",We,[s("div",Le,[a(O)?(n(),Q(z,{key:0,onClick:ce,name:"ph:caret-left-bold",size:"27",class:"close-icon w-[40px] pl-[30px]"})):(n(),i("div",Pe)),s("div",Ye,f(a(oe)),1),a(Z)?(n(),Q(z,{key:2,onClick:pe,name:"ph:caret-right-bold",size:"27",class:"close-icon w-[40px] pr-[30px]"})):(n(),i("div",Ge))]),s("div",Oe,[(n(),i(T,null,j(ae,t=>s("div",{key:t,class:"weekday-cell"},f(t),1)),64))]),s("div",Ze,[(n(!0),i(T,null,j(a(ne),t=>(n(),i("button",{key:t.date||t.day+"-"+t.isBlank,class:E(["day-cell",{"other-month":t.isBlank,today:t.date===a(te),selected:a(r)===t.date,disabled:!A(t.date)||t.isBlank}]),onClick:D=>!t.isBlank&&A(t.date)&&ie(t.date),"aria-pressed":a(r)===t.date?"true":"false"},f(t.isBlank?"":t.day),11,Ke))),128))])]),a(r)||a(d)||a(m)?(n(),i("div",qe,[a(r)?(n(),i("div",He,[e[17]||(e[17]=s("h3",null,"Wybierz lekarza",-1)),s("div",Qe,[(n(!0),i(T,null,j(a(P),t=>(n(),i("div",{key:t.doctor_id,class:E(["person",{selected:a(d)===t.doctor_id}]),onClick:D=>re(t.doctor_id)},f(t.name)+" "+f(t.surname),11,Je))),128))])])):h("",!0),a(r)&&a(d)?(n(),i("div",Xe,[e[18]||(e[18]=s("h3",null,"Dostępne godziny",-1)),s("div",et,[(n(!0),i(T,null,j(a(G),t=>(n(),i("div",{key:t,class:E(["time",{selected:a(m)===t}]),onClick:D=>ue(t)},f(t),11,tt))),128)),a(G).length===0?(n(),i("div",st," Brak dostępnych godzin ")):h("",!0)])])):h("",!0),a(r)&&a(d)&&a(m)?(n(),i("div",at,[e[19]||(e[19]=s("h3",null,"Usługa",-1)),k(w,{modelValue:a(U),"onUpdate:modelValue":e[0]||(e[0]=t=>J(U)?U.value=t:null),options:a(se),placeholder:"Wybierz usługę, jaka Cię interesuje"},null,8,["modelValue","options"])])):h("",!0),a(r)&&a(d)&&a(m)?(n(),i("div",lt,[e[24]||(e[24]=s("h3",null,"Twoje dane",-1)),s("form",{onSubmit:ke(de,["prevent"])},[s("div",nt,[s("div",ot,[k(y,{modelValue:a(o).name,"onUpdate:modelValue":e[1]||(e[1]=t=>a(o).name=t),name:"name",placeholder:"Imię"},null,8,["modelValue"]),k(y,{modelValue:a(o).surname,"onUpdate:modelValue":e[2]||(e[2]=t=>a(o).surname=t),name:"surname",placeholder:"Nazwisko"},null,8,["modelValue"])]),s("div",it,[k(y,{modelValue:a(o).email,"onUpdate:modelValue":e[3]||(e[3]=t=>a(o).email=t),name:"email",placeholder:"E-mail"},null,8,["modelValue"]),k(y,{modelValue:a(o).phone,"onUpdate:modelValue":e[4]||(e[4]=t=>a(o).phone=t),name:"phone",placeholder:"Telefon"},null,8,["modelValue"])]),s("div",rt,[e[20]||(e[20]=s("p",null,"Ile masz lat?",-1)),s("div",ut,[k(y,{modelValue:a(o).wiek,"onUpdate:modelValue":e[5]||(e[5]=t=>a(o).wiek=t),name:"wiek",placeholder:"Wiek"},null,8,["modelValue"])])]),X(s("textarea",{"onUpdate:modelValue":e[6]||(e[6]=t=>a(o).description=t),placeholder:"Napisz coś o sobie...",class:"add-description min-h-[170px]"},null,512),[[we,a(o).description]])]),s("div",dt,[s("label",ct,[X(s("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=t=>J(C)?C.value=t:null),class:"checkbox-hidden"},null,512),[[he,a(C)]]),e[21]||(e[21]=s("span",{class:"checkbox-custom"},null,-1)),e[22]||(e[22]=s("p",{class:"text-[#8a8a8a] mt-[2px]"},"akceptuje regulamin i politykę prywatności",-1))]),e[23]||(e[23]=s("button",{type:"submit",class:"reserve-button mt-[16px]"},"Zarezerwuj wizytę",-1))])],32)])):h("",!0)])):h("",!0)])):h("",!0)]),_:1})])}}}),vt=Object.assign(R(mt,[["__scopeId","data-v-5290dc80"]]),{__name:"VisitsNewReserve"}),xt=""+new URL("hero-photo.QRecj5mN.png",import.meta.url).href,_t={class:"flex w-full mt-[70px] mb-[60px]"},ft=F({__name:"index",setup(W){const{resetErrors:g}=ee();return(B,v)=>{const x=vt;return n(),i("div",{class:"flex w-ful px-[100px] mx-auto",onClick:v[0]||(v[0]=p=>a(g)())},[s("div",_t,[k(x)]),v[1]||(v[1]=s("div",{class:"main-photo flex items-center justify-center"},[s("img",{class:"hero-photo",src:xt})],-1))])}}}),yt=R(ft,[["__scopeId","data-v-571eed07"]]);export{yt as default};
